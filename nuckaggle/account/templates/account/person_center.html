{% extends 'bar.html' %}
{% block title %}
个人中心
{% endblock %}

{% block content %}
	<div class="col-md-3"></div>
	<div class="col-md-6">
		<h3>本站注册信息：</h3>
			<span><i class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;&nbsp;&nbsp;昵称：{{user.username}}</span><br>
			<span><i class="glyphicon glyphicon-envelope"></i>&nbsp;&nbsp;&nbsp;&nbsp;邮箱：{{user.email}}</span>
			&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="{% url 'confirm' 1 %}" class="btn btn-success">修改</a>
	<h3>报名参赛信息：</h3>
	<div>
		{% if has_enter %}
			<span>姓名：{{userprofile.name}}</span><br>
			<span>性别：{{userprofile.sex}}</span><br>
			<span>学校：{{userprofile.college}}</span><br>
			<span>学号：{{userprofile.student_id}}</span><br>
			<span>联系电话：{{userprofile.phone}}</span>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="{% url 'confirm' 2 %}" class="btn btn-success">修改</a>
		{% else %}
		<h5>未报名参赛</h5>
		{% endif %}
	</div>

	<h3>队伍：</h3>
	<div>
		{% if has_team %}
		<ul>
			<li>队伍号：{{team.id}}</li>
			<li>队伍名：{{team.team_name}}</li>
			<li>队长昵称：{{team.captain.username}}</li>
			<li>队伍人数：{{team.peo_num}}</li>
			<li>队伍成员：
				<ul>
					{% for i in member %}
					<li>{{i.userprofile.user.username}}</li>
					{% endfor %}
				</ul>
			</li>
			<li>提交次数：{{team.sub_num}}</li>
			<li>最新提交分数：{{team.last_score}}</li>
			<li>最高分:{{team.max_score}}</li>
			<li>最高分日期：{{team.ma_sc_dat}}</li>
		</ul>
		<button><a href="{% url 'team' %}">修改</a></button>
		{% else %}
		<h5>尚未组队或加入队伍</h5>
		{% endif %}
	</div>

	<h3>请求：</h3>
	<div>
		{% if has_request %}
			<h5>队伍发出：</h5>
			{% for i in team_invite %}
			<p>队长({{i.team.captain.username}})代表队伍({{i.team.team_name}})向您发出了入队请求,待同意</p>
			{% empty %}
			<p>----暂无----</p>
			{% endfor %}

			<h5>参赛人员入队请求：</h5>
			{% for i in person_apply %}
			<p>您向队伍({{i.team.team_name}})发送了入队请求,待该队队长同意</p>
			{% empty %}
			<p>----暂无----</p>
			{% endfor %}
		{% else %}
			{% if is_captain %}
				<h3>您是队长</h3>
				<h5>队伍发出：</h5>
				{% for i in team_invite %}
				<p>您代表队伍({{i.team.team_name}})向参赛人员({{i.userprofile.user.username}})发送了入队请求，待同意</p>
				{% empty %}
				<p>----暂无----</p>
				{% endfor %}

				<h5>参赛人员入队请求：</h5>
				{% for i in person_apply %}
				<p>参赛人员({{i.userprofile.user.username}})向您所在队伍({{i.team.team_name}})发送了入队请求,待您同意</p>
				{% empty %}
				<p>----暂无----</p>
				{% endfor %}
			{% else %}
			<h5>暂没有和您相关的队伍请求</h5>
			{% endif %}
		{% endif %}
		<a href="{% url 'req_deal' %}" class="btn btn-success">请求处理</a>
	</div>
	<br>
	<br>
	</div>
	<div class="col-md-3"></div>
	<script type="text/javascript" src="/static/js/alert.js"></script>
	<script>
	        a={{ statu }};
	        if (a==1)
	        {
	            window.alert('\n\n     {{ error }}\n\n');
	        }
	</script>
{% endblock %}

{% block per_center_act %}active{% endblock %}

